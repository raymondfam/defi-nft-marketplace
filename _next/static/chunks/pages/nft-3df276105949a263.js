(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{34378:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nft",function(){return n(27118)}])},27118:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n(85893),i=n(83078),s=n(34051),r=n.n(s),u=n(67294),p=n(17e3),d=n(60455),o=n(25675),l=n.n(o),y=n(69251),c=n(45821),m=n(35553);function f(e){var t=e.nftAddress,n=e.tokenId,s=e.isVisible,r=e.marketplaceAddress,d=e.onClose,o=(0,y.lm)(),l=(0,u.useState)(0),c=l[0],f=l[1],b=(0,i.JX)({abi:p,contractAddress:r,functionName:"updateListing",params:{nftAddress:t,tokenId:n,newPrice:m.fi(c||"0")}}).runContractFunction;return(0,a.jsx)(y.u_,{isVisible:s,onCancel:d,onCloseButtonPressed:d,okText:"Confirm",isCentered:!0,width:"65vw",title:"Update Listing",onOk:function(){b({onError:function(e){console.log(e)},onSuccess:function(){return o({type:"success",message:"listing updated",title:"Listing updated - please refresh (and move blocks)",position:"topR"}),d&&d(),void f("0")}})},children:(0,a.jsx)(y.II,{style:{marginBottom:"24px"},label:"Update listing price in L1 Currency (ETH)",name:"New listing price",type:"number",onChange:function(e){f(e.target.value)}})})}function b(e){var t=e.nftAddress,n=e.tokenId,s=e.isVisible,r=e.marketplaceAddress,u=e.onClose,d=(0,y.lm)(),o=function(){d({type:"success",message:"listing canceled",title:"Listing canceled - please refresh (and move blocks)",position:"topR"}),u&&u(),setPriceTocancelListingWith("0")},l=(0,i.JX)({abi:p,contractAddress:r,functionName:"cancelListing",params:{nftAddress:t,tokenId:n}}).runContractFunction;return(0,a.jsx)(y.u_,{isVisible:s,onCancel:u,onCloseButtonPressed:u,okText:"Confirm",title:"Cancel Listing?",isCentered:!0,width:"30vw",onOk:function(){l({onError:function(e){console.log(e)},onSuccess:o})},children:(0,a.jsx)("div",{class:"flex justify-center",children:(0,a.jsx)("p",{className:"py-4 font-bold",children:"Are you sure you want to proceed?"})})})}function x(e,t,n,a,i,s,r){try{var u=e[s](r),p=u.value}catch(d){return void n(d)}u.done?t(p):Promise.resolve(p).then(a,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function r(e){x(s,a,i,r,u,"next",e)}function u(e){x(s,a,i,r,u,"throw",e)}r(void 0)}))}}function v(e){var t=e.price,n=e.nftAddress,s=e.tokenId,o=e.marketplaceAddress,x=e.seller,v=function(e){e.classList.toggle("hidden"),e.classList.toggle("flex")},h=(0,i.Nr)(),g=h.isWeb3Enabled,w=h.account,k=(0,u.useState)(""),A=k[0],I=k[1],M=(0,u.useState)(""),j=M[0],N=M[1],C=(0,u.useState)(""),E=C[0],F=C[1],_=(0,u.useState)(!1),P=_[0],S=_[1],B=(0,u.useState)(!1),L=B[0],O=B[1],D=function(){S(!1),O(!1)},R=(0,y.lm)(),U=(0,i.JX)({abi:d,contractAddress:n,functionName:"tokenURI",params:{_tokenId:s}}).runContractFunction,z=(0,i.JX)({abi:p,contractAddress:o,functionName:"buyItem",msgValue:t,params:{nftAddress:n,tokenId:s}}).runContractFunction;function J(){return(J=T(r().mark((function e(){var t,n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:if(t=e.sent,console.log("The TokenURI is ".concat(t)),!t){e.next=16;break}return n=t.replace("ipfs://","https://ipfs.io/ipfs/"),e.next=8,fetch(n);case 8:return e.next=10,e.sent.json();case 10:a=e.sent,i=a.image,s=i.replace("ipfs://","https://ipfs.io/ipfs/"),I(s),N(a.name),F(a.description);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.useEffect)((function(){g&&function(){J.apply(this,arguments)}()}),[g]);var V=x===w||void 0===x,X=V?"you":function(e,t){if(e.length<=t)return e;var n=t-"...".length,a=Math.ceil(n/2),i=Math.floor(n/2);return e.substring(0,a)+"..."+e.substring(e.length-i)}(x||"",15),W=function(){R({type:"success",message:"Item bought!",title:"Item Bought",position:"topR"})};document.onclick=function(e){var t=document.querySelectorAll(".options"),n=document.querySelectorAll(".edit"),a=!0,i=!1,s=void 0;try{for(var r,u=n[Symbol.iterator]();!(a=(r=u.next()).done);a=!0){if(r.value.contains(e.target))return}}catch(m){i=!0,s=m}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}var p=!0,d=!1,o=void 0;try{for(var l,y=t[Symbol.iterator]();!(p=(l=y.next()).done);p=!0){var c=l.value;c.classList.contains("hidden")||v(c)}}catch(m){d=!0,o=m}finally{try{p||null==y.return||y.return()}finally{if(d)throw o}}};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:A?(0,a.jsxs)("div",{children:[(0,a.jsx)(f,{isVisible:P,tokenId:s,marketplaceAddress:o,nftAddress:n,onClose:D}),(0,a.jsx)(b,{isVisible:L,tokenId:s,marketplaceAddress:o,nftAddress:n,onClose:D}),(0,a.jsx)(y.Zb,{title:j,description:E,onClick:V?"":function(e){V?S(!0):z({onError:function(e){return console.log(e)},onSuccess:function(){return W()}})},children:(0,a.jsxs)("div",{className:"p-2",children:[function(){var e="flex justify-".concat(V?"between":"end");return(0,a.jsxs)("div",{className:e,children:[V?(0,a.jsxs)("div",{className:"flex flex-col text-black font-bold edit",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",onClick:function(){var e=document.getElementById(s);v(e)},children:[(0,a.jsx)(c.Oz,{fontSize:"15px"})," ",(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)("div",{className:"hidden flex-col select absolute z-10 top-12 bg-white rounded-md options",id:s,children:[(0,a.jsxs)("button",{className:"flex gap-2 justify-end items-center hover:bg-slate-200 p-3 rounded-md",onClick:function(e){var t=document.getElementById(s);v(t),S(!0)},children:[(0,a.jsx)(c.I8,{fontSize:"15.5px"}),"Update Listing"]}),(0,a.jsxs)("button",{className:"flex gap-1 hover:bg-slate-200 p-3 rounded-md",onClick:function(){var e=document.getElementById(s);v(e),O(!0)},children:[(0,a.jsx)(c.X1,{fontSize:"24px",fill:"#ef4444"}),(0,a.jsx)("span",{className:" text-red-500",children:"Cancel Listing"})]})]})]}):null,(0,a.jsxs)("div",{children:["#",s]})]})}(),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"italic text-sm",children:["Owned by ",X]}),(0,a.jsx)(l(),{loader:function(){return A},src:A,height:"200",width:"200"}),(0,a.jsxs)("div",{className:"font-bold",children:[m.bM(t,"ether")," ETH"]})]})]})})]}):(0,a.jsx)("div",{children:"Loading..."})})})}var h=n(48036);function g(){var e,t,n=(e=['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n'],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return g=function(){return n},n}var w=(0,n(17283).Ps)(g()),k=n(16991),A=n(68815);function I(){var e=(0,i.Nr)(),t=e.isWeb3Enabled,n=e.chainId,s=n?parseInt(n).toString():"31337",r=h[s].NftMarketplace[0],u=(0,k.a)(w),p=u.loading,d=(u.error,u.data);return(0,a.jsx)(A.ZP,{children:(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-8 nfts px-4",children:t?p||!d?(0,a.jsx)("div",{children:"Loading..."}):d.activeItems.map((function(e){console.log(e);var t=e.price,n=e.nftAddress,i=e.tokenId,s=e.seller;return(0,a.jsx)("div",{children:(0,a.jsx)(v,{price:t,nftAddress:n,tokenId:i,marketplaceAddress:r,seller:s},"".concat(n).concat(i))})})):(0,a.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})})}},60455:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_achiever","type":"address"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"},{"internalType":"string","name":"_uriPrefix","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"achiever","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"cost","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxMintAmountPerTx","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_mintAmount","type":"uint256"},{"internalType":"uint256","name":"_amountIn","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_mintAmount","type":"uint256"},{"internalType":"address","name":"_receiver","type":"address"}],"name":"mintForAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_cost","type":"uint256"}],"name":"setCost","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxMintAmountPerTx","type":"uint256"}],"name":"setMaxMintAmountPerTx","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_state","type":"bool"}],"name":"setPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_uriPrefix","type":"string"}],"name":"setUriPrefix","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_uriSuffix","type":"string"}],"name":"setUriSuffix","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"uriPrefix","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uriSuffix","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},17e3:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"AlreadyListed","type":"error"},{"inputs":[],"name":"NoProceeds","type":"error"},{"inputs":[],"name":"NotApprovedForMarketplace","type":"error"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"NotListed","type":"error"},{"inputs":[],"name":"NotOwner","type":"error"},{"inputs":[],"name":"PriceMustBeAboveZero","type":"error"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"PriceNotMet","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":true,"internalType":"address","name":"nftAddress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"ItemBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"seller","type":"address"},{"indexed":true,"internalType":"address","name":"nftAddress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ItemCanceled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"seller","type":"address"},{"indexed":true,"internalType":"address","name":"nftAddress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"ItemListed","type":"event"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"buyItem","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"cancelListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getListing","outputs":[{"components":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"seller","type":"address"}],"internalType":"struct NFTExchange.Listing","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"seller","type":"address"}],"name":"getProceeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"listItem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"newPrice","type":"uint256"}],"name":"updateListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawProceeds","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"4":{"NftMarketplace":["0xd68659713d345E640e9fc408cbf8187def41793b"],"BasicNFT":["0xB34DfE4a6365b95a8aE6EE51092d62FEB351Ab1F"],"Achiever":["0xCc9EFF5C3eA0F653f48349091d8ffE096fa341C0"],"WETH":["0xc778417E063141139Fce010982780140Aa0cD5Ab"],"Mutuals":["0xC1C0f2901C27d2CAD9F17b65D942162DAA36A023"]},"5":{"NftMarketplace":["0xd68659713d345E640e9fc408cbf8187def41793b"],"BasicNFT":["0xB34DfE4a6365b95a8aE6EE51092d62FEB351Ab1F"],"Achiever":["0x593c86060302615698B54443Cd7E7E7Cd06d1C1e"],"WETH":["0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6"],"Mutuals":["0x18B4c7C0281E8F19be9Dad2977356064fe8DB86d"]},"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]}}')}},function(e){e.O(0,[956,593,606,478,774,888,179],(function(){return t=34378,e(e.s=t);var t}));var t=e.O();_N_E=t}]);